<div>
    <h1>Parties</h1>
    <login-buttons></login-buttons>
    <hr>
    <br>
    <parties-form [hidden]='!user'></parties-form>
    <br>    
    <div>
        <input type="text" #searchText placeholder="Search by location">
        <button (click)="search(searchText.value)">Search</button>

        <select #sort (change)="changeSortOrder(sort.value)">
        <option value="1" selected>Ascending</option>
        <option value="-1">Descending</option>
        </select>
    </div>
    <br>

    <ul>
        <li *ngFor="let party of parties | async">
            <a [routerLink]="['/party',party._id]">{{party.name}}</a>
            <p>{{party.description}}</p>
            <p>{{party.location.name}}</p>
            <button [hidden]="!isOwner(party)" (click)="removeParty(party)">X</button>
            <div>
                Who is coming:
                Yes - {{party | rsvp:'yes'}}
                Maybe - {{party | rsvp:'maybe'}}
                No - {{party | rsvp:'no'}}
            </div>
        </li>        
    </ul>

    <sebm-google-map
        [latitude]="0"
        [longitude]="0"
        [zoom]="1">
        <div *ngFor="let party of parties | async">
        <sebm-google-map-marker
            *ngIf="party.location.lat"
            [latitude]="party.location.lat"
            [longitude]="party.location.lng">
        </sebm-google-map-marker>
        </div>
    </sebm-google-map>
  
    <pagination-controls (pageChange)="onPageChanged($event)"></pagination-controls>
</div>
